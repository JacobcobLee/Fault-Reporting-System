{"ast":null,"code":"import _slicedToArray from\"D:\\\\material-dashboard-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import GridItem from\"components/Grid/GridItem.js\";import GridContainer from\"components/Grid/GridContainer.js\";import Card from\"components/Card/Card.js\";import CardHeader from\"components/Card/CardHeader.js\";import CardBody from\"components/Card/CardBody.js\";import Button from\"components/CustomButtons/Button.js\";import axios from'axios';import Select from'react-select';import{useState}from'react';var pageURL=window.location.href;var lastURLSegment=pageURL.substr(pageURL.lastIndexOf('/')+1);//console.log(lastURLSegment);\nvar displayspecificCases=[];function getSpecificCases(){axios.get(\"https://bch-server.herokuapp.com/api/v1/fault/\"+lastURLSegment).then(function(response){displayspecificCases.push(response.data);});}getSpecificCases();export default function Pending(){var _useState=useState(\"Pending\"),_useState2=_slicedToArray(_useState,2),edit=_useState2[0],setEdit=_useState2[1];var _useState3=useState(displayspecificCases[0].comments),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var user2=\"sample text\";//this function will get the email the user entered from the local storage\nfunction userName(){if(localStorage.getItem('user')){user2=localStorage.getItem('user');// this sets the local var with the one in the local storage\n//setCurrentUser(user2)\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Posting/Saving As:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:user2,className:\"form-control\",disabled:\"true\"}));// console.log(user2); //display the the username to check in the console \n}}function putSpecificCases(){axios.put(\"https://bch-server.herokuapp.com/api/v1/fault/\"+lastURLSegment,{\"status\":edit.toString(),\"comments\":comment.toString(),\"lasteditedby\":user2.toString()});window.alert('Successfully edited case!');window.location.href=\"/admin/dashboard\";}//loop for all answers and if there's 2 or more, put comma in between\nfunction displayAnswer(dis){var test='';for(var i=0;i<dis.length;i++){if(i===dis.length-1){test+=dis[i];}else{test+=dis[i]+',';}}return test;}//if data has no radio, it will display empty instead of error.\nfunction displayRadio(display){if(display==null){return'There is no radio';}else{return display;}}//if data has one or more checkbox \nfunction displayData2(dis){if(displayspecificCases[0].problem.checkbox.length>1){return displayspecificCases[0].problem.checkbox.map(function(item){return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,item.name,\" : \")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"b\",null,displayAnswer(item.answer)))));});}else{return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,displayspecificCases[0].problem.checkbox.name,\" : \")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"b\",null,displayAnswer(displayspecificCases[0].problem.checkbox.answer)))));}}//return radio if there is \nfunction tryReturnRadio(){try{return displayspecificCases[0].problem.radio.name;}catch(error){return null;}}function tryReturnRadio2(){try{return displayspecificCases[0].problem.radio.answer;}catch(error){return null;}}//function to retrieve image from firestore\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),img=_useState6[0],setimg=_useState6[1];function retrieveImg(imgURL){axios.get(\"https://bch-server.herokuapp.com/api/v1/image?location=\"+imgURL).then(function(response){//console.log(\"A@@@@\");\n//console.log(response.data);\nsetimg(response.data.toString());});}retrieveImg(displayspecificCases[0].imageurl);var statusOptions=[{value:\"Pending\",label:\"Pending\"},{value:\"Resolved\",label:\"Resolved\"}];return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"b\",null,\"Pending Case\")),/*#__PURE__*/React.createElement(GridContainer,null,/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:3},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Reported on:\"))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,displayspecificCases[0].dateTime)))),/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:3},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Store Location:\"))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,displayspecificCases[0].storeName)))),/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:3},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Staff Reported:\"))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,displayspecificCases[0].staffName)))),/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:3},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Fault Type:\"))),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h5\",null,displayspecificCases[0].problem.category))))),/*#__PURE__*/React.createElement(\"h3\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"b\",null,\"Incident Details\")),/*#__PURE__*/React.createElement(GridContainer,null,/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:12},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h4\",null,displayRadio(tryReturnRadio()),\":\"),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"b\",null,displayRadio(tryReturnRadio2()))),displayData2(displayspecificCases[0].problem.checkbox),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Fault Image:\"),/*#__PURE__*/React.createElement(\"img\",{width:\"360px\",height:\"270px\",src:img}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Description:\"),displayspecificCases[0].description,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Issue Status:\"),/*#__PURE__*/React.createElement(Select,{defaultValue:{value:\"Pending\",label:\"Pending\"},className:\"basic-single\",classNamePrefix:\"select\",name:\"color\",options:statusOptions,onChange:function onChange(e){return setEdit(e.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Comments:\"),/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",defaultValue:comment,onChange:function onChange(e){return setComment(e.target.value);},className:\"form-control\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h4\",null,\"Last Edited By:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:displayspecificCases[0].lasteditedby,disabled:\"true\",className:\"form-control\"}),/*#__PURE__*/React.createElement(\"br\",null),userName())))),/*#__PURE__*/React.createElement(GridContainer,null,/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:12},/*#__PURE__*/React.createElement(Button,{onClick:putSpecificCases,fullWidth:true,color:\"success\"},\"Save\"))));}","map":{"version":3,"sources":["D:/material-dashboard-react-master/src/layouts/Pending.js"],"names":["React","GridItem","GridContainer","Card","CardHeader","CardBody","Button","axios","Select","useState","pageURL","window","location","href","lastURLSegment","substr","lastIndexOf","displayspecificCases","getSpecificCases","get","then","response","push","data","Pending","edit","setEdit","comments","comment","setComment","user2","userName","localStorage","getItem","putSpecificCases","put","toString","alert","displayAnswer","dis","test","i","length","displayRadio","display","displayData2","problem","checkbox","map","item","name","answer","tryReturnRadio","radio","error","tryReturnRadio2","img","setimg","retrieveImg","imgURL","imageurl","statusOptions","value","label","textAlign","dateTime","storeName","staffName","category","description","e","target","lasteditedby"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardHeader from \"components/Card/CardHeader.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\nimport Button from \"components/CustomButtons/Button.js\";\r\nimport axios from 'axios';\r\nimport Select from 'react-select';\r\nimport { useState } from 'react';\r\n\r\n\r\n\r\n\r\nvar pageURL = window.location.href;\r\nvar lastURLSegment = pageURL.substr(pageURL.lastIndexOf('/') + 1);\r\n//console.log(lastURLSegment);\r\n\r\nconst displayspecificCases = [];\r\n\r\nfunction getSpecificCases() {\r\n    axios\r\n        .get(\"https://bch-server.herokuapp.com/api/v1/fault/\" + lastURLSegment)\r\n        .then((response) => {\r\n            displayspecificCases.push(response.data)\r\n        })\r\n}\r\n\r\ngetSpecificCases();\r\n\r\n\r\nexport default function Pending() {\r\n    const [edit, setEdit] = useState(\"Pending\");\r\n    const [comment,setComment] = useState(displayspecificCases[0].comments);\r\n\r\n    let user2 = \"sample text\";\r\n\r\n    //this function will get the email the user entered from the local storage\r\n    function userName() {\r\n        if (localStorage.getItem('user')) {\r\n            user2 = localStorage.getItem('user');// this sets the local var with the one in the local storage\r\n            //setCurrentUser(user2)\r\n            return (\r\n                <div>\r\n                <h4>Posting/Saving As:</h4>\r\n                <input type=\"text\" defaultValue={user2} className=\"form-control\" disabled=\"true\"></input>\r\n                </div>\r\n            )\r\n            // console.log(user2); //display the the username to check in the console \r\n        }\r\n    }\r\n\r\n\r\n    function putSpecificCases() {\r\n        axios\r\n            .put(\"https://bch-server.herokuapp.com/api/v1/fault/\" + lastURLSegment,{\"status\": edit.toString(), \"comments\": comment.toString(),\"lasteditedby\": user2.toString() })\r\n            window.alert('Successfully edited case!')\r\n            window.location.href = \"/admin/dashboard\"\r\n    }\r\n    //loop for all answers and if there's 2 or more, put comma in between\r\n    function displayAnswer(dis) {\r\n        let test = '';\r\n        for (let i = 0; i < dis.length; i++) {\r\n            if (i === dis.length - 1) {\r\n                test += dis[i];\r\n            } else {\r\n                test += dis[i] + ',';\r\n            }\r\n        }\r\n        return test;\r\n    }\r\n\r\n    //if data has no radio, it will display empty instead of error.\r\n    function displayRadio(display) {\r\n        if (display == null) {\r\n            return 'There is no radio';\r\n        } else {\r\n            return display;\r\n        }\r\n    }\r\n    //if data has one or more checkbox \r\n    function displayData2(dis) {\r\n        if (displayspecificCases[0].problem.checkbox.length > 1) {\r\n            return(displayspecificCases[0].problem.checkbox.map(item => {\r\n                return (\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h4>{item.name} : </h4>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <h5><b>{displayAnswer(item.answer)}</b></h5>\r\n                        </CardBody>\r\n                    </Card>\r\n                )\r\n            }))\r\n        } else {\r\n            return (\r\n                <Card>\r\n                    <CardHeader>\r\n                        <h4>{displayspecificCases[0].problem.checkbox.name} : </h4>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <h5><b>{displayAnswer(displayspecificCases[0].problem.checkbox.answer)}</b></h5>\r\n                    </CardBody>\r\n                </Card>\r\n            )\r\n        }\r\n    }\r\n    //return radio if there is \r\n    function tryReturnRadio() {\r\n        try {\r\n            return displayspecificCases[0].problem.radio.name\r\n        } catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n    function tryReturnRadio2() {\r\n        try {\r\n            return displayspecificCases[0].problem.radio.answer\r\n        } catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n    //function to retrieve image from firestore\r\n    const [img, setimg] = useState('');\r\n    function retrieveImg(imgURL) {\r\n        axios\r\n            .get(\"https://bch-server.herokuapp.com/api/v1/image?location=\" + imgURL)\r\n            .then((response) => {\r\n                //console.log(\"A@@@@\");\r\n                //console.log(response.data);\r\n                setimg(response.data.toString());\r\n            })\r\n    }\r\n    retrieveImg(displayspecificCases[0].imageurl);\r\n\r\n    const statusOptions = [{ value: \"Pending\", label: \"Pending\" }, { value: \"Resolved\", label: \"Resolved\" }]\r\n    return (\r\n        <div>\r\n            <h3 style={{ textAlign: 'center' }}><b>Pending Case</b></h3>\r\n            <GridContainer>\r\n                <GridItem xs={12} sm={12} md={3}>\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h4><b>Reported on:</b></h4>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <h5>{displayspecificCases[0].dateTime}</h5>\r\n                        </CardBody>\r\n                    </Card>\r\n                </GridItem>\r\n                <GridItem xs={12} sm={12} md={3}>\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h4><b>Store Location:</b></h4>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <h5>{displayspecificCases[0].storeName}</h5>\r\n                        </CardBody>\r\n                    </Card>\r\n                </GridItem>\r\n                <GridItem xs={12} sm={12} md={3}>\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h4><b>Staff Reported:</b></h4>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <h5>{displayspecificCases[0].staffName}</h5>\r\n                        </CardBody>\r\n                    </Card>\r\n                </GridItem>\r\n                <GridItem xs={12} sm={12} md={3}>\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h4><b>Fault Type:</b></h4>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <h5>{displayspecificCases[0].problem.category}</h5>\r\n                        </CardBody>\r\n                    </Card>\r\n                </GridItem>\r\n            </GridContainer>\r\n            <h3 style={{ textAlign: 'center' }}><b>Incident Details</b></h3>\r\n            <GridContainer>\r\n                <GridItem xs={12} sm={12} md={12}>\r\n                    <Card>\r\n                        <CardBody>\r\n                            <h4>{displayRadio(tryReturnRadio())}:</h4>\r\n                            <h5><b>{displayRadio(tryReturnRadio2())}</b></h5>\r\n                    {\r\n                        displayData2(displayspecificCases[0].problem.checkbox)\r\n                    }\r\n                    <br></br>\r\n                    <h4>Fault Image:</h4>\r\n                    <img width=\"360px\" height=\"270px\" src={img} />\r\n                    <br></br>\r\n                    <br></br>\r\n                    <h4>Description:</h4>\r\n                    {displayspecificCases[0].description}\r\n                    <br></br>\r\n                    <br></br>\r\n                    <h4>Issue Status:</h4>\r\n                            <Select\r\n                                defaultValue={{ value: \"Pending\", label: \"Pending\" }}\r\n                                className=\"basic-single\"\r\n                                classNamePrefix=\"select\"\r\n                                name=\"color\"\r\n                                options={statusOptions}\r\n                                onChange={e => setEdit(e.value)}\r\n                            />\r\n                    <br></br>\r\n                    <h4>Comments:</h4>\r\n                    <textarea type=\"text\" defaultValue={comment} onChange={e=>setComment(e.target.value)} className=\"form-control\" />\r\n                    <br></br>\r\n                    <h4>Last Edited By:</h4>\r\n                    <input type=\"text\" defaultValue={displayspecificCases[0].lasteditedby} disabled=\"true\" className=\"form-control\"></input>\r\n                    <br></br>\r\n                    {userName()}\r\n                        </CardBody>\r\n                    </Card>\r\n                </GridItem>\r\n            </GridContainer>\r\n            <GridContainer>\r\n                <GridItem xs={12} sm={12} md={12}>\r\n                    <Button onClick={putSpecificCases} fullWidth color=\"success\">Save</Button>\r\n                </GridItem>\r\n            </GridContainer>\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}