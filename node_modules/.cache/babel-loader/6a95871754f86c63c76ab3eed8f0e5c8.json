{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\jacob\\\\Desktop\\\\FYP YR3\\\\dashboard\\\\MASTER VERSION\\\\Development Build\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\jacob\\\\Desktop\\\\FYP YR3\\\\dashboard\\\\MASTER VERSION\\\\Development Build\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\jacob\\\\Desktop\\\\FYP YR3\\\\dashboard\\\\MASTER VERSION\\\\Development Build\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';import'react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css';import'react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css';import'bootstrap/dist/css/bootstrap.min.css';import BootstrapTable from'react-bootstrap-table-next';import paginationFactory from'react-bootstrap-table2-paginator';import filterFactory,{textFilter,selectFilter}from'react-bootstrap-table2-filter';import axios from'axios';import Card from\"components/Card/Card.js\";import CardBody from\"components/Card/CardBody.js\";import CardHeader from\"components/Card/CardHeader.js\";import Button from\"components/CustomButtons/Button.js\";import GridItem from\"components/Grid/GridItem.js\";import GridContainer from\"components/Grid/GridContainer.js\";import ToolkitProvider from'react-bootstrap-table2-toolkit';export default function Analytics(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),analytics=_useState2[0],setAnalytics=_useState2[1];var getAnalyticsData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://bchserver.herokuapp.com/api/v1/fault2\").then(function(response){console.log(response.data);setAnalytics(Object.values(response.data));});case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function getAnalyticsData(){return _ref.apply(this,arguments);};}();var selectOptions=[{value:'Unresolved',label:'Unresolved'},{value:'Pending',label:'Pending'},{value:'Resolved',label:'Resolved'}];var columns=[//,filter: dateFilter()\n{dataField:\"date\",text:\"Case reported on\",filter:textFilter()},{dataField:\"storeName\",text:\"Store Location\",filter:textFilter()},{dataField:\"problem.category\",text:\"Category\",filter:textFilter()},{dataField:\"description\",text:\"Description\",filter:textFilter()},{dataField:\"staffName\",text:\"Staff Name\",filter:textFilter()},{dataField:\"comments\",text:\"Comments\",filter:textFilter()},{dataField:\"status\",text:\"Status\",filter:selectFilter({options:selectOptions})},{dataField:\"lasteditedby\",text:\"Last Edited By\",hidden:\"true\"},{dataField:\"problem.checkbox.name\",text:\"Problem Checkbox Name\",hidden:\"true\"},{dataField:\"problem.checkbox.answer\",text:\"Problem Checkbox Answer\",hidden:\"true\"},{dataField:\"problem.radio.name\",text:\"Problem Radio Name\",hidden:\"true\"},{dataField:\"problem.radio.answer\",text:\"Problem Radio Answer\",hidden:\"true\"}];useEffect(function(){getAnalyticsData();},[]);analytics.sort(function(a,b){return a-b;}).reverse();var MyExportCSV=function MyExportCSV(props){var handleClick=function handleClick(){props.onExport();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(GridContainer,null,/*#__PURE__*/React.createElement(GridItem,{xs:12,sm:12,md:12},/*#__PURE__*/React.createElement(Button,{onClick:handleClick,fullWidth:true,color:\"info\"},\"Generate Excel Sheet\"))));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{color:\"primary\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Cases\"),/*#__PURE__*/React.createElement(\"p\",null,\"Cases can be generated as excel sheet and downloaded\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(ToolkitProvider,{keyField:\"uuid\",data:analytics,columns:columns,exportCSV:{exportAll:false,onlyExportFiltered:true}},function(props){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(BootstrapTable,Object.assign({filter:filterFactory(),keyField:\"uuid\",data:analytics,columns:columns,pagination:paginationFactory(),filterPosition:\"top\"},props.baseProps)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(MyExportCSV,props.csvProps));}))));}","map":{"version":3,"sources":["C:/Users/jacob/Desktop/FYP YR3/dashboard/MASTER VERSION/Development Build/src/views/Analytics/Analytics.js"],"names":["React","useState","useEffect","BootstrapTable","paginationFactory","filterFactory","textFilter","selectFilter","axios","Card","CardBody","CardHeader","Button","GridItem","GridContainer","ToolkitProvider","Analytics","analytics","setAnalytics","getAnalyticsData","get","then","response","console","log","data","Object","values","selectOptions","value","label","columns","dataField","text","filter","options","hidden","sort","a","b","reverse","MyExportCSV","props","handleClick","onExport","exportAll","onlyExportFiltered","baseProps","csvProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\r\nimport 'react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css';\r\nimport 'react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\nimport filterFactory, { textFilter, selectFilter } from 'react-bootstrap-table2-filter';\r\nimport axios from 'axios';\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\nimport CardHeader from \"components/Card/CardHeader.js\";\r\nimport Button from \"components/CustomButtons/Button.js\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport ToolkitProvider from 'react-bootstrap-table2-toolkit';\r\n\r\nexport default function Analytics() {\r\n    const [analytics,setAnalytics] = useState([]);\r\n    const getAnalyticsData = async ()=> {\r\n        try{\r\n            await axios\r\n            .get(\"http://bchserver.herokuapp.com/api/v1/fault2\")\r\n            .then((response) => {\r\n                console.log(response.data);\r\n                setAnalytics(Object.values(response.data));\r\n            })\r\n        }\r\n        catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    const selectOptions = [\r\n      { value: 'Unresolved', label: 'Unresolved' },\r\n      { value: 'Pending', label: 'Pending' },\r\n      { value: 'Resolved', label: 'Resolved' }\r\n    ];\r\n\r\n    const columns = [//,filter: dateFilter()\r\n        {dataField: \"date\", text:\"Case reported on\",filter: textFilter()},\r\n        {dataField: \"storeName\", text:\"Store Location\",filter: textFilter()},\r\n        {dataField: \"problem.category\", text:\"Category\",filter: textFilter()},\r\n        {dataField: \"description\", text:\"Description\",filter: textFilter()},\r\n        {dataField: \"staffName\", text:\"Staff Name\",filter: textFilter()},\r\n        {dataField: \"comments\", text:\"Comments\",filter: textFilter()},\r\n        {dataField: \"status\", text:\"Status\",filter: selectFilter({\r\n          options: selectOptions\r\n        })},\r\n        {dataField: \"lasteditedby\", text:\"Last Edited By\", hidden:\"true\"},\r\n        {dataField: \"problem.checkbox.name\", text:\"Problem Checkbox Name\", hidden:\"true\"},\r\n        {dataField: \"problem.checkbox.answer\", text:\"Problem Checkbox Answer\", hidden:\"true\"},\r\n        {dataField: \"problem.radio.name\", text:\"Problem Radio Name\", hidden:\"true\"},\r\n        {dataField: \"problem.radio.answer\", text:\"Problem Radio Answer\", hidden:\"true\"},\r\n    ]\r\n\r\n    useEffect(() => {\r\n        getAnalyticsData();\r\n    },[])\r\n\r\n    analytics.sort((a, b) => a - b).reverse()\r\n\r\n    const MyExportCSV = (props) => {\r\n      const handleClick = () => {\r\n        props.onExport();\r\n      };\r\n      return (\r\n        <div>\r\n           <GridContainer>\r\n            <GridItem xs={12} sm={12} md={12}>\r\n                <Button onClick={handleClick} fullWidth color=\"info\">Generate Excel Sheet</Button>\r\n            </GridItem>\r\n        </GridContainer>\r\n        </div>\r\n      );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n        <Card>\r\n        <CardHeader color=\"primary\">\r\n        <h4>Cases</h4>\r\n          <p>\r\n            Cases can be generated as excel sheet and downloaded\r\n          </p>\r\n        </CardHeader>\r\n        <CardBody>\r\n        <ToolkitProvider\r\n          keyField=\"uuid\"\r\n          data={ analytics }\r\n          columns={ columns }\r\n          exportCSV ={ {\r\n            exportAll:false,\r\n            onlyExportFiltered:true\r\n          } }\r\n        >\r\n        {\r\n        props => (\r\n          <div>\r\n            <BootstrapTable\r\n            filter={filterFactory()}\r\n            keyField=\"uuid\"\r\n            data={analytics}\r\n            columns={columns}\r\n            pagination={paginationFactory()}\r\n            filterPosition=\"top\"\r\n            { ...props.baseProps } />\r\n            <hr />\r\n            <MyExportCSV { ...props.csvProps } />\r\n          </div>\r\n        )\r\n      }\r\n    </ToolkitProvider>\r\n        </CardBody>\r\n        </Card>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}